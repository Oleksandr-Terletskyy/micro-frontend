<mat-toolbar color="primary">Findings</mat-toolbar>

<table
  mat-table
  [dataSource]="findings()"
  class="mat-elevation-z8 findings-table"
>
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef>ID</th>
    <td mat-cell *matCellDef="let f">{{ f.id }}</td>
  </ng-container>

  <ng-container matColumnDef="assetId">
    <th mat-header-cell *matHeaderCellDef>Asset ID</th>
    <td mat-cell *matCellDef="let f">{{ f.assetId }}</td>
  </ng-container>

  <ng-container matColumnDef="severity">
    <th mat-header-cell *matHeaderCellDef>Severity</th>
    <td mat-cell *matCellDef="let f">{{ f.severity | uppercase }}</td>
  </ng-container>

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef>Title</th>
    <td mat-cell *matCellDef="let f">{{ f.title }}</td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let f">
      <span [class]="'status-' + f.status">{{ f.status }}</span>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let f">
      <button
        mat-raised-button
        color="accent"
        (click)="resolve(f.id)"
        *ngIf="f.status !== 'resolved' && f.status !== 'closed'"
      >
        Resolve
      </button>
      <span *ngIf="f.status === 'resolved'" class="resolved-label"
        >Resolved</span
      >
      <span *ngIf="f.status === 'closed'" class="closed-label">Closed</span>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
